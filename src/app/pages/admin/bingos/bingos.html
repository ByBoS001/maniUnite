<section class="space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-semibold text-gray-900">Gestión de Bingos</h1>

    <div class="flex items-center gap-3">
      <button
        class="inline-flex items-center gap-2 rounded-lg border px-4 py-2 text-gray-700 hover:bg-gray-50"
      >
        ⛭ Filtros
      </button>

      <!-- Reusando el botón de crear (abre el mismo modal) -->
      <button
        (click)="openCreate()"
        class="inline-flex items-center gap-2 rounded-lg bg-emerald-500 px-4 py-2 text-white hover:bg-emerald-600"
      >
        ＋ Crear Bingo
      </button>
    </div>
  </div>

  <!-- Lista -->
  <div class="rounded-2xl border bg-white p-5 shadow-sm">
    <h2 class="text-lg font-semibold text-gray-900">Historial de Donaciones</h2>

    <div class="mt-5 space-y-5">
      <div class="bg-white shadow-lg rounded-lg overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Detalle</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Imágenes</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            @for (donation of donations(); track donation.id) {
              <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  @if (donation.type === 'money') {
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Dinero</span>
                  } @else {
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Premio</span>
                  }
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  @if (donation.type === 'money') {
                    <span>{{ donation.amount | currency }}</span>
                  } @else {
                    <span>{{ donation.description }}</span>
                  }
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {{ donation.timestamp.toDate() | date:'medium' }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  @if (donation.images && donation.images.length > 0) {
                    <div class="flex -space-x-2 overflow-hidden">
                      @for (image of donation.images; track $index) {
                        <img class="inline-block h-8 w-8 rounded-full ring-2 ring-white" [src]="image" alt="Imagen de la donación">
                      }
                    </div>
                  } @else {
                    <span>-</span>
                  }
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Modal reutilizado -->
  <app-create-bingo
    *ngIf="showCreate"
    [donations]="donations()"
    (close)="closeCreate()"
  ></app-create-bingo>
</section>
